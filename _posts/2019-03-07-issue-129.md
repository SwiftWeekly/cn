---
layout: post
title: ! 'Issue #129'
author: btb
---

ä»¥ä¸‹æœ€è¿‘ä¸¤å‘¨çš„æ–°é—»ã€‚

<!--excerpt-->

### å…¥é—¨ä»»åŠ¡

- [TF-67](https://bugs.swift.org/browse/TF-67) [Autodiff] `BumpPtrAllocating` some classes that have `SmallBitVector` fields
- [TF-86](https://bugs.swift.org/browse/TF-86) [Tests] Use `expectEqual` instead of `expectTrue`
- [TF-93](https://bugs.swift.org/browse/TF-93) [Graph Program Extraction] Deabstraction should properly diagnose recursion
- [TF-130](https://bugs.swift.org/browse/TF-130) [Graph Program Extraction] Add API to serialize a `@convention(tensorflow)` function as a graph

### æ’­å®¢

Jesse å’Œ JP [è®¨è®ºäº†](https://spec.fm/podcasts/swift-unwrapped/279806) å…³äº Swift å®˜æ–¹ä»£ç æ ¼å¼å’Œè§„èŒƒçš„è‰æ¡ˆã€‚

[John Sundell](https://twitter.com/johnsundell) å’Œ [Ted Kremenek](https://twitter.com/tkremenek) [è®¨è®º](https://www.swiftbysundell.com/podcast/42) äº†æœ€æ–°çš„ Swift 5 ç‰ˆæœ¬ï¼Œç€é‡å…³æ³¨ ABI ç¨³å®šæ€§ä»¥åŠè¿™é—¨è¯­è¨€çš„æœªæ¥å±•æœ›ã€‚

### ç¤¾åŒºæ–°é—»

Swift 4.2.3 for Linux [æ­£å¼å‘å¸ƒ](https://forums.swift.org/t/swift-4-2-3/21089)ï¼

[Keith Smiley](https://twitter.com/SmileyKeith/) åˆ†äº«äº†ä¸€ä¸ª Xcode çš„[æ„å»ºè®¾ç½®æ€»è§ˆ](https://gist.github.com/keith/3f01e1c9b763e9aceb70411927a0c42c)ï¼Œç”¨äºæŒ‡å®š Swift å†…å­˜ç‹¬ç«‹æ€§çš„ç¼–è¯‘å™¨æ ‡å¿—ã€‚

[Jordan Rose](https://twitter.com/UINT_MIN/) åˆ†äº«äº†[ä¸€ä¸ªæœ‰è¶£çš„å¤æ´»èŠ‚å½©è›‹](https://twitter.com/UINT_MIN/status/1098628355539124224)ï¼šå…³äº `swiftmodule` æ–‡ä»¶çš„ç¥å¥‡æ•°å­— â€”â€” UTF-8 ç¼–ç ä¸‹çš„ `E2 9C A8 0E` å³ `âœ¨14`ï¼Œè€Œè¿™åˆ†åˆ«æ˜¯ Swift è¯­è¨€æœ€åˆçš„åå­—ï¼Œä»¥åŠ Swift 1 æ­£å¼å‘å¸ƒçš„å¹´ä»½ã€‚

Swift æœåŠ¡å™¨ç«¯åä¼šå‘å¸ƒäº†å®ƒä»¬æœ€æ–°çš„[æ‰€æœ‰æ¼”è®²è§†é¢‘](https://www.serversideswift.info/videos)ã€‚

Ray Wenderlich ä¸ºæˆ‘ä»¬æ€»ç»“äº†[å…³äº Swift æœåŠ¡å™¨ç«¯çš„å­¦ä¹ èµ„æº](https://www.raywenderlich.com/server-side-swift)ã€‚

Swift å°†ä¼šå†æ¬¡[ä½œä¸ºç»„ç»‡å‚åŠ ](https://forums.swift.org/t/swift-to-participate-in-gsoc-2019/20937)ä»Šå¹´çš„ Google ç¼–ç¨‹ä¹‹å¤ ï¼ˆGSOCï¼‰ã€‚

> è¯‘è€…æ³¨ï¼šGoogle ç¼–ç¨‹ä¹‹å¤ï¼ˆGoogle Summer of Codeï¼‰ï¼Œæ˜¯ç”± Google å…¬å¸æ‰€ä¸»åŠçš„å¹´åº¦å¼€æºç¨‹åºè®¾è®¡é¡¹ç›®ï¼Œæ¯”èµ›çš„ä¸»è¦ç›®çš„æ˜¯é¼“åŠ±å­¦ç”Ÿå‚ä¸å¼€æ”¾æºä»£ç çš„ç¨‹åºè®¾è®¡æ´»

### å®¡æ ¸ä¸­ææ¡ˆ

[SE-0243](https://github.com/apple/swift-evolution/blob/master/proposals/0243-codepoint-and-character-literals.md): *Integer-convertible character literals* [æ­£åœ¨å®¡æ ¸ä¸­](https://forums.swift.org/t/se-0243-codepoint-and-character-literals/21188)ã€‚

> Swift çš„å­—ç¬¦ä¸²ç±»å‹æ˜¯ä¸º Unicode çš„æ­£ç¡®æ€§è€Œè®¾è®¡çš„ï¼Œå®ƒæŠ½è±¡ä¸ºå­—ç¬¦ä¸²çš„åº•å±‚äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œå°†å…¶å»ºæ¨¡ä¸º[å­—ä½](https://zh.wikipedia.org/wiki/%E5%AD%97%E4%BD%8D)çš„ â€œé›†åˆâ€ã€‚
> åœ¨ç¼–ç¨‹ä¸­ï¼Œå­—ç¬¦ä¸²ä½œä¸º ASCII å€¼å¸¸å¸¸éœ€è¦è¢«è¡¨ç¤ºæˆæœ¬è´¨ä¸Šæ˜¯æ•°å­—ä½†å…·æœ‰æ–‡æœ¬å«ä¹‰çš„å€¼ã€‚æˆ‘ä»¬å»ºè®®æ·»åŠ ä¸€ä¸ªæ–°çš„å­—é¢é‡è¯­æ³•ï¼Œä½¿ç”¨å•å¼•å·ï¼ˆ`'`ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€æ˜åœ°è½¬æ¢æˆ Swift çš„æ•´æ•°ç±»å‹ã€‚è¿™ç§è¯­æ³•å°†æ‰©å±•åˆ°æ‰€æœ‰ â€œå•å…ƒç´ â€ æ–‡æœ¬ï¼ŒåŒ…æ‹¬ `Character`ï¼Œå¹¶å°†æˆä¸ºè¿™äº›ç±»å‹çš„é¦–é€‰å­—é¢é‡è¯­æ³•ã€‚

[SE-0244](https://github.com/apple/swift-evolution/blob/master/proposals/0244-opaque-result-types.md): *Opaque Result Types* [æ­£åœ¨å®¡æ ¸ä¸­](https://forums.swift.org/t/se-0244-opaque-result-types/21252)ã€‚

> æ­¤è‰æ¡ˆå¼•å…¥äº†éšè—å‡½æ•°è¿”å›çš„ç‰¹å®šç»“æœç±»å‹çš„åŠŸèƒ½ã€‚è¿”å›ç»“æœç±»å‹ä»…ç”±å…¶è‡ªèº«æè¿°ï¼Œä¾‹å¦‚ï¼Œå‡½æ•°å¯ä»¥æŒ‡å®šè¿”å›ä¸€ä¸ª Collectionï¼Œè€Œä¸å¿…æŒ‡å®šç‰¹å®šçš„ Collectionã€‚è°ƒç”¨è€…ä»å¯ä»¥ä½¿ç”¨è¿”å›å€¼ï¼Œä½†å…¶å…·ä½“ç±»å‹ä»…ä¸ºå‡½æ•°çš„å®ç°æ‰€çŸ¥ï¼Œå¹¶ä¸éœ€è¦æ˜ç¡®å£°æ˜ã€‚

è¯‘è€…æ³¨ï¼š

å‡è®¾ `LazyMapCollection` æœ‰ä¸€ä¸ªåä¸º `compactMap` çš„æ–¹æ³•ï¼Œå®ƒè¿”å› `LazyCompactMapCollection` ç±»å‹çš„é›†åˆã€‚

{% highlight swift %}
extension LazyMapCollection {
  public func compactMap<U>(_ transform: @escaping (Element) -> U?)
      -> LazyCompactMapCollection<Base, U> {
    return LazyCompactMapCollection<Base, U>(/*...*/)
  }
}
{% endhighlight %}

å½“ `LazyCompactMapCollection` ç±»å‹åœ¨æœªæ¥ç‰ˆæœ¬éœ€è¦å˜æ›´ï¼Œå¦‚æ”¹åæ—¶ï¼Œä¼šå¯¼è‡´ä¹‹å‰çš„ä»£ç ä¸å…¼å®¹ã€‚
å¼•å…¥é€æ˜ Result ç±»å‹åï¼Œå¯ä»¥å†™æˆè¿™ä¸ªæ ·å­ï¼Œè¿”å›çš„ç±»å‹å˜æˆ `opaque Collection`ã€‚

{% highlight swift %}
extension LazyMapCollection {
  public func compactMap<U>(_ transform: @escaping (Element) -> U?)
      -> opaque Collection where _.Element == U {
    return LazyCompactMapCollection<Base, U>(/*...*/)
  }
}
{% endhighlight %}

è¿™æ ·å‡½æ•°å¯ä»¥æŒ‡å®šè¿”å›ä¸€ä¸ª Collectionï¼Œè€Œä¸å¿…æŒ‡å®šç‰¹å®šçš„ Collectionï¼Œè€Œ `LazyCompactMapCollection` ä»…ä¸ºå…¶å®ç°æ‰€çŸ¥ã€‚

### è®ºå›åŠ¨å‘

[Saleem Abdulrasool](https://twitter.com/compnerd) åˆ†äº«äº†å…³äº Swift åœ¨ Windows å¹³å°çš„[å¼€å‘è¿›å±•](https://forums.swift.org/t/a-swift-takes-flight/20845)ã€‚Awesome work! ğŸ‰

[Joe Groff](https://twitter.com/jckarter) èµ·è‰äº†[ä¸€ä»½è‰æ¡ˆ](https://forums.swift.org/t/protocol-assoctype-t-shorthand-for-combined-protocol-and-associated-type-constraints-without-naming-the-constrained-type/21217)ï¼Œä¸€ä¸ªè¯­æ³•ç³–ç”¨äºå£°æ˜åè®®åŠå…¶å…³è”èŒƒå‹çš„ç±»å‹ã€‚

{% highlight swift %}
// å‰é¢çš„ç‚¹å·ç”¨æ¥è¡¨ç¤ºå…³è”çš„èŒƒå‹ç±»å‹
T: Protocol<.Type == Int> // ç­‰ä»·äº T: Protocol where T.Type == Int
T: Protocol<.TypeA == .TypeB> // ç­‰ä»·äº T: Protocol where T.TypeA == T.TypeB
T: Protocol<.Type: OtherProtocol> // ç­‰ä»·äº T: Protocol where T.Type: OtherProtocol
{% endhighlight %}

[Tony Allevato](https://twitter.com/tony_allevato) å’Œ [Dave Abrahams](https://twitter.com/daveabrahams) [èµ·è‰äº†å…³äº Swift è¯­è¨€å®˜æ–¹ä»£ç æ ¼å¼åŠè§„èŒƒçš„è‰æ¡ˆ](https://forums.swift.org/t/pitch-an-official-style-guide-and-formatter-for-swift/21025)ã€‚

> æˆ‘ä»¬å»ºè®® Swift é¡¹ç›®é‡‡ç”¨ä¸€ç»„ç¼–ç é£æ ¼æŒ‡å—ï¼Œå¹¶æä¾›ä¸€ç§æ ¼å¼åŒ–å·¥å…·ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ ¹æ®è¿™äº›æŒ‡å—è½»æ¾åœ°è¯Šæ–­å’Œæ›´æ–°ã€‚ 
>
> åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå¼€å‘äººå‘˜å¹¶æ²¡æœ‰è¾¾æˆä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚äº‹å®ä¸Šï¼Œå³ä½¿æ˜¯ Apple è‡ªå·±åœ¨ GitHub ä¸Šçš„ Swift è¯­è¨€é¡¹ç›® - ä¾‹å¦‚æ ‡å‡†åº“ï¼ŒFoundationï¼ŒSwift NIO ç­‰ï¼Œä¹Ÿé‡‡ç”¨äº†å„è‡ªä¸åŒçš„ç¼–ç é£æ ¼ã€‚ 

[Michael Ilseman](https://twitter.com/Ilseman) èµ·è‰äº†[å…³äº contiguous strings çš„è‰æ¡ˆ](https://forums.swift.org/t/pitch-contiguous-strings/21206)ã€‚

> æˆ‘ä»¬æ”¶åˆ°äº†å¾ˆå¤šå…³å¿ƒæ€§èƒ½çš„å¼€å‘è€…çš„è¯·æ±‚ï¼Œå¯¹äºå­—ç¬¦ä¸²æœ€å¸¸è§å°±æ˜¯æä¾›ç›´æ¥è®¿é—®åŸå§‹åº•å±‚ä»£ç å•å…ƒçš„ API æ–¹æ³•ã€‚è€Œ Swift 5 çš„å­—ç¬¦ä¸²é»˜è®¤ä½¿ç”¨ UTF-8 ç¼–ç ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ­¤æä¸Šæ—¥ç¨‹äº†ã€‚
>
>ã€Œè¿ç»­å­—ç¬¦ä¸²ã€æ˜¯èƒ½å¤Ÿåœ¨æ’å®šæ—¶é—´å†…ä¸ºæœ‰æ•ˆç¼–ç çš„ UTF-8 å†…å®¹æä¾›æŒ‡é’ˆå’Œé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚

[Johannes Weiss](https://twitter.com/johannesweiss) [å®£å¸ƒ](https://forums.swift.org/t/development-open-for-swift-4-2-4-for-linux/21287) Swift 4.2.4 for Linux çš„å¼€å‘å·¥ä½œæ­£å¼å¼€å§‹ã€‚

> æˆ‘ä»¬åœ¨ Swift 4.2.3 ç‰ˆæœ¬ï¼Œå³ 2019 å¹´ 2 æœˆä»½çš„ç‰ˆæœ¬ä¿®å¤äº†å¾ˆå¤šé—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬å®£å¸ƒ Swift 4.2.4 çš„ Linux ç‰ˆæœ¬å¼€å‘å·¥ä½œæ­£å¼å¼€å§‹ã€‚

### å°¾å£°

Swift å›¢é˜Ÿæ¥ä¸€ä½[æ–°æˆå‘˜](https://twitter.com/jckarter/status/1100431977755234306)! ğŸ¶
